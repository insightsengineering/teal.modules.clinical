<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Decorate Module Output • teal.modules.clinical</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Decorate Module Output">
<link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">teal.modules.clinical</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.11.1.9014</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/teal-modules-clinical.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/decorate-module-output.html">Decorate Module Output</a></li>
    <li><a class="dropdown-item" href="../articles/generate_tmc_test_data.html">Example Data Generation</a></li>
    <li><a class="dropdown-item" href="../articles/quickstart_substitute.html">Quick start: `substitute` for NSE</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul>
</li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/release-candidate">release-candidate</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/v0.11.1">v0.11.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/v0.10.0">v0.10.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/v0.10.0-rc1">v0.10.0-rc1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/v0.9.1">v0.9.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/v0.9.0">v0.9.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/v0.8.16">v0.8.16</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/v0.8.15">v0.8.15</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/teal.modules.clinical/v0.8.14">v0.8.14</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/teal.modules.clinical"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Decorate Module Output</h1>
                        <h4 data-toc-skip class="author">NEST
CoreDev</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/teal.modules.clinical/blob/main/vignettes/decorate-module-output.Rmd" class="external-link"><code>vignettes/decorate-module-output.Rmd</code></a></small>
      <div class="d-none name"><code>decorate-module-output.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The outputs produced by <code>teal</code> modules, like graphs or
tables, are created by the module developer and look a certain way. It
is hard to design an output that will satisfy every possible user, so
the form of the output should be considered a default value that can be
customized. Here we describe the concept of <em>decoration</em>,
enabling the app developer to tailor outputs to their specific
requirements without rewriting the original module code.</p>
<p>The decoration process is build upon transformation procedures,
introduced in <code>teal</code>. While <code>transformators</code> are
meant to edit module’s input, decorators are meant to adjust the
module’s output. To distinguish the difference, modules in
<code>teal.modules.clinical</code> have 2 separate parameters:
<code>transformators</code> and <code>decorators</code>.</p>
<p>To get a complete understanding refer the following vignettes:</p>
<ul>
<li>Transforming the input data in <a href="https://insightsengineering.github.io/teal/latest-tag/articles/transform-input-data.html" class="external-link">this
vignette</a>.</li>
<li>Transforming module output in <a href="https://insightsengineering.github.io/teal/latest-tag/articles/transform-module-output.html" class="external-link">this
vignette</a>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="outputs-that-can-be-decorated">Outputs that can be decorated<a class="anchor" aria-label="anchor" href="#outputs-that-can-be-decorated"></a>
</h2>
<p>It is important to note which output objects from a given module can
be decorated. The module function documentation’s <em>Decorating
Module</em> section has this information.</p>
<p>You can also refer the table shown below to know which module outputs
can be decorated.</p>
<table class="table">
<colgroup>
<col width="24%">
<col width="75%">
</colgroup>
<thead><tr class="header">
<th>Module</th>
<th>Outputs (Class)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>tm_a_gee</code></td>
<td>table (ElementaryTable)</td>
</tr>
<tr class="even">
<td><code>tm_a_mmrm</code></td>
<td>lsmeans_table (TableTree), lsmeans_plot (ggplot), covariance_table
(ElementaryTable), fixed_effects_table (ElementaryTable),
diagnostic_table (ElementaryTable), diagnostic_plot (ggplot)</td>
</tr>
<tr class="odd">
<td><code>tm_g_barchart_simple</code></td>
<td>plot (ggplot)</td>
</tr>
<tr class="even">
<td><code>tm_g_ci</code></td>
<td>plot (ggplot)</td>
</tr>
<tr class="odd">
<td><code>tm_g_forest_rsp</code></td>
<td>plot (ggplot)</td>
</tr>
<tr class="even">
<td><code>tm_g_forest_tte</code></td>
<td>plot (ggplot)</td>
</tr>
<tr class="odd">
<td><code>tm_g_ipp</code></td>
<td>plot (ggplot)</td>
</tr>
<tr class="even">
<td><code>tm_g_km</code></td>
<td>plot (ggplot)</td>
</tr>
<tr class="odd">
<td><code>tm_g_lineplot</code></td>
<td>plot (ggplot)</td>
</tr>
<tr class="even">
<td><code>tm_g_pp_adverse_events</code></td>
<td>table (datatables), plot (ggplot)</td>
</tr>
<tr class="odd">
<td><code>tm_g_pp_patient_timeline</code></td>
<td>plot (ggplot)</td>
</tr>
<tr class="even">
<td><code>tm_g_pp_therapy</code></td>
<td>plot (ggplot), table (datatables)</td>
</tr>
<tr class="odd">
<td><code>tm_g_pp_vitals</code></td>
<td>plot (ggplot)</td>
</tr>
<tr class="even">
<td><code>tm_t_abnormality</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_abnormality_by_worst_grade</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="even">
<td><code>tm_t_ancova</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_binary_outcome</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="even">
<td><code>tm_t_coxreg</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_events</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="even">
<td><code>tm_t_events_by_grade</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_events_patyear</code></td>
<td>table (ElementaryTable)</td>
</tr>
<tr class="even">
<td><code>tm_t_events_summary</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_exposure</code></td>
<td>table (ElementaryTable)</td>
</tr>
<tr class="even">
<td><code>tm_t_logistic</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_mult_events</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="even">
<td><code>tm_t_pp_basic_info</code></td>
<td>table (datatables)</td>
</tr>
<tr class="odd">
<td><code>tm_t_pp_laboratory</code></td>
<td>table (datatables)</td>
</tr>
<tr class="even">
<td><code>tm_t_pp_medical_history</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_pp_prior_medication</code></td>
<td>table (datatables)</td>
</tr>
<tr class="even">
<td><code>tm_t_shift_by_arm</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_shift_by_arm_by_worst</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="even">
<td><code>tm_t_shift_by_grade</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_smq</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="even">
<td><code>tm_t_summary</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="odd">
<td><code>tm_t_summary_by</code></td>
<td>table (TableTree)</td>
</tr>
<tr class="even">
<td><code>tm_t_tte</code></td>
<td>table (TableTree)</td>
</tr>
</tbody>
</table>
<p>Also, note that there are three different types of objects that can
be decorated:</p>
<ol style="list-style-type: decimal">
<li>
<code>listing_df</code>, <code>ElementaryTable</code>,
<code>TableTree</code>
</li>
<li><code>ggplot</code></li>
<li><code>datatables</code></li>
</ol>
<p><em>Tip:</em> A general tip before trying to decorate the output from
the module is to copy the reproducible code and running them in a
separate R session to quickly iterate the decoration you want.</p>
</div>
<div class="section level2">
<h2 id="decorating-listing_df-elementarytable-tabletree">Decorating <code>listing_df</code>, <code>ElementaryTable</code>,
<code>TableTree</code><a class="anchor" aria-label="anchor" href="#decorating-listing_df-elementarytable-tabletree"></a>
</h2>
<p>Here’s an example to showcase how you can edit an output of class
<code>listing_df</code>, <code>ElementaryTable</code>, or
<code>TableTree</code>. All these classes are extension of objects
created using <code>rtables</code> and can be modified with the help of
<code>rtables</code> modifiers like
<code><a href="https://insightsengineering.github.io/rtables/latest-tag/reference/insert_rrow.html" class="external-link">rtables::insert_rrow</a></code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://insightsengineering.github.io/teal.modules.clinical/">teal.modules.clinical</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html" class="external-link">teal_data</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span>  <span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="va">tmc_ex_adsl</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      ITTFL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/with_label.html" class="external-link">with_label</a></span><span class="op">(</span><span class="st">"Intent-To-Treat Population Flag"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>DTHFL <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">DTHDT</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Y"</span>, <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">""</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/with_label.html" class="external-link">with_label</a></span><span class="op">(</span><span class="st">"Subject Death Flag"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span>  <span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="va">tmc_ex_adlb</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op">==</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="external-link">fct_reorder</a></span><span class="op">(</span><span class="va">AVISIT</span>, <span class="va">AVISITN</span>, <span class="va">min</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      ONTRTFL <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>        <span class="va">AVISIT</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SCREENING"</span>, <span class="st">"BASELINE"</span><span class="op">)</span> <span class="op">~</span> <span class="st">""</span>,</span>
<span>        <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Y"</span></span>
<span>      <span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/with_label.html" class="external-link">with_label</a></span><span class="op">(</span><span class="st">"On Treatment Record Flag"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/join_keys.html" class="external-link">join_keys</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">default_cdisc_join_keys</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">insert_rrow_decorator</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">default_caption</span> <span class="op">=</span> <span class="st">"I am a good new row"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">teal_transform_module</span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"New row"</span>,</span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span>, <span class="st">"new_row"</span><span class="op">)</span>, <span class="st">"New row"</span>, value <span class="op">=</span> <span class="va">default_caption</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">moduleServer</span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu">reactive</span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span></span>
<span>              <span class="op">{</span></span>
<span>                <span class="va">table</span> <span class="op">&lt;-</span> <span class="fu">rtables</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-tag/reference/insert_rrow.html" class="external-link">insert_rrow</a></span><span class="op">(</span><span class="va">table</span>, <span class="fu">rtables</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-tag/reference/rrow.html" class="external-link">rrow</a></span><span class="op">(</span><span class="va">new_row</span><span class="op">)</span><span class="op">)</span></span>
<span>              <span class="op">}</span>,</span>
<span>              new_row <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">new_row</span></span>
<span>            <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">init</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu">modules</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/tm_t_abnormality.html">tm_t_abnormality</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"tm_t_abnormality"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADSL"</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"ARMCD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"ARM"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      add_total <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      by_vars <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADLB"</span>, subset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LBCAT"</span>, <span class="st">"PARAM"</span>, <span class="st">"AVISIT"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LBCAT"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>        keep_order <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      baseline_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADLB"</span>, subset <span class="op">=</span> <span class="st">"BNRIND"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"BNRIND"</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      grade <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADLB"</span>, subset <span class="op">=</span> <span class="st">"ANRIND"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"ANRIND"</span>,</span>
<span>        fixed <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      abnormal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"LOW"</span>, high <span class="op">=</span> <span class="st">"HIGH"</span><span class="op">)</span>,</span>
<span>      exclude_base_abn <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      decorators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>table <span class="op">=</span> <span class="fu">insert_rrow_decorator</span><span class="op">(</span><span class="st">"I am a good new row"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shinyApp</span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<iframe src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMASzLgCcoDTqA3OAAgB4BaDgMwCuEZtRIAKAJQcAKlgCqAUQA6EADbUARo3oBPceShqMMIgBNBauAGcMBDRGoEjk1Ru1Q9BuEZPnLNnYOTi6qqmZQpFDcfADu1KQAFrTeRgD6EVFSuBwgqhwc7jr6ZqhquvSuEAUAggAiAMoAMjEcpDAEaXAAHmlQZtZqHAA+AHz5BRwwglHk4hOTHACSMjIAYi0AvAJMpET082AAmspg0mMc8UlpalCacGqHS3RkPDJEb-Q+pBwACkSoSyRMTVNa3ADmpyqi3O42qk2mszg4jqMgAEhsONtnNY4GlYokKOIAITUWzQFHo1HSAB+HFOJzwsgUig4dNOUJGo0uCUSNzuD0ODUEmgAVnBmBw6t9EhwwVBIWcqmF4fUmgAhVrtTo9PpmNSaLkLKYzSLImoANSWDRWWO2-H2zlI1kQiH4zDSX32ZgY4kt1pWOX9NpkADkcjBaJJYcbEWb5vDFgB5UNydZbDg4vEEonGxbB20AUlohczQoAwlhFIpQ0tQwBxU45U7qmoNRRNOsqM5s+lgJt5yZyJS9hkcxOTWE8663e6PU5J6oyL6ReBkDhYCXeuUQqHGqoAXyqoqItDSAGs4LprOJMlBpLwOD7+FBLKQ0gQzGTOiez5fr8A0DwDed6SAAuiqtC4vQ770PQRCxBkW6MHs9CtEIIgsBIz6vmo77OKgWHVNspxLBwsDkRw4JEOYHAQHAsQcPBsScnk8KGGoaSkIwEDWA69AwGkpgWFYCaLLODxYn2oYMUxCEDhOgjUFJGGiBI1BmNIbGLAU1jJBAuiuuQ3SkM8gKkOIem0IZiChg04gac2kAMZ68lnE5MmMcxTYcKwRiCJw2w4W+H5oER0KTAeuDGtB7BofawhqRADlmDkoG5IOwkBA0DBxSlOSqURDkQOZOREDMpUcLi1jWCCWmDgUK6iOw4jaTpix3lIRoTu1BRXPpYm9e1bVDe1USaFYrQwXcVguogUEMLBzEGDNcA5NNE02K6cEIeI9GIcx0YNb1UXHe1+2uYx2y0OZAAkF3eT1vURe1R6Dm9E4HhMh4qmgqCtLQCSDXeUl3tF8JZbNUmQzYg0FO0XF9JoED7DARgJPog4SUMJFgAj753CjAno6QugKe1d5AYFfZquq5M6Z4gl+fFmaJKeBA2GkuJWMwcBmHDOkEGzTg2FJzPUKtH7CxzN6nPUzQ+dYIq4j82KHDUWAALI+XLWvlnUUKSODQ3cxK5BmFJuva-2T1G4O-RmFxRBRDjco1E07bGzpmi6GkzPWFJQvs5zpu8-zx1ByLAfbOLkuRzL6t1BqivK3AqtlqcGrljUMg62AvwazU1tOQWudKl77Wh+bgeHFnOd5wXWBF1CFc6ZecCoGk3oMFJw4qLbrcFJoUDc7QeLM4H0shw8Zt8wLiyx5tUvB7LYC0ynmgq5bYDqqGWB1gb7nHVXfPb7v++hofBXUN0p-bH3g52094KMD6k8r1zM9h-Pkzx6LMeeAlkvP+q915MiVpvNO28ah7wPi3Y+X9q64xgRfK+x1+A3zvsyJQj9B7kWRqjIwUkNDWAsmoBC28mhJgAOo+WSOCWUuM0RLHrGieBT0ej2EED6NIw9cRI2Im7D2ig8E+mIChfY0dChkgsuNSa11eKLU9MxJC4jIj7CeORGAlFqK0X2nJFiSp9zfVUMqRw-AODFXIIwZqyJowZXhFZAyNR0DiD+rdJSOR3GxQYIeMAB4wJAA" width="150%" height="800px" data-external="1" style="position: relative; z-index:1">
</iframe>
</div>
<div class="section level2">
<h2 id="decorating-ggplot">Decorating <code>ggplot</code><a class="anchor" aria-label="anchor" href="#decorating-ggplot"></a>
</h2>
<p>Here’s an example to showcase how you can edit an output of class
<code>ggplot</code>. You can extend them using <code>ggplot2</code>
functions.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://insightsengineering.github.io/teal.modules.clinical/">teal.modules.clinical</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html" class="external-link">teal_data</a></span><span class="op">(</span>join_keys <span class="op">=</span> <span class="va">default_cdisc_join_keys</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="st">"ADRS"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span><span class="va">data</span>, <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://insightsengineering.github.io/nestcolor/" class="external-link">nestcolor</a></span><span class="op">)</span></span>
<span>  <span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="va">rADSL</span></span>
<span>  <span class="va">ADTTE</span> <span class="op">&lt;-</span> <span class="va">tmc_ex_adtte</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/join_keys.html" class="external-link">join_keys</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">default_cdisc_join_keys</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span></span>
<span><span class="va">ggplot_caption_decorator</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">default_caption</span> <span class="op">=</span> <span class="st">"I am a good decorator"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">teal_transform_module</span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"Caption"</span>,</span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span>, <span class="st">"title"</span><span class="op">)</span>, <span class="st">"Plot Title"</span>, value <span class="op">=</span> <span class="va">default_caption</span><span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">moduleServer</span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu">reactive</span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span></span>
<span>              <span class="op">{</span></span>
<span>                <span class="va">plot</span> <span class="op">&lt;-</span> <span class="va">plot</span> <span class="op">+</span></span>
<span>                  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span> <span class="op">+</span></span>
<span>                  <span class="fu">cowplot</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/theme_cowplot.html" class="external-link">theme_cowplot</a></span><span class="op">(</span><span class="op">)</span></span>
<span>              <span class="op">}</span>,</span>
<span>              title <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">title</span></span>
<span>            <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">init</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu">modules</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/tm_g_km.html">tm_g_km</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"tm_g_km"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span>      arm_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"ARMCD"</span>, <span class="st">"ACTARMCD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="st">"ARM"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        <span class="fu">value_choices</span><span class="op">(</span><span class="st">"ADTTE"</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>        <span class="st">"OS"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      arm_ref_comp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        ACTARMCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ref <span class="op">=</span> <span class="st">"ARM B"</span>, comp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM A"</span>, <span class="st">"ARM C"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        ARM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ref <span class="op">=</span> <span class="st">"B: Placebo"</span>, comp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A: Drug X"</span>, <span class="st">"C: Combination"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      strata_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"BMRKR2"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="st">"SEX"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      facet_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"BMRKR2"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="cn">NULL</span></span>
<span>      <span class="op">)</span>,</span>
<span>      decorators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>plot <span class="op">=</span> <span class="fu">ggplot_caption_decorator</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shinyApp</span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<iframe src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMASzLgCcoDTqA3OAAgB4BaDgMwCuEZtRIAKAJQcAKlgCqAUQA6EADbUARo3oBPceShqMMIgBNBauAGcMBDRGoEjk1Ru1Q9BuEZPnLNnYOTi6qqmZQpFDcfIZqAPoRUeIAVkS08QDWcLrWHAC8HGZw-FCWpPEEZtTWBPFpGdm5wATiymAAggAiAMoAMu24HO3dWD3tkgC6rhBJ0bwcAO7UpAAWtOJzQyCqHBz0cACOgtQH4hA2pMRqRPQze939MfuPAxAPXTIyis+kMHVwAAe8SgZlI5FUAF8Zg0IFkctZNpEoNIFsVSuVKtVavV0nCmtZgNB4Ii5lMwhBVABzKmoG4VZyoFgkRJwYiMUi3Z5CETMiCbEplNQMtB8grDMAASQ4sBlHCpRHMRTZt0itwmHB27w4cXipEYEGs-FuMHipgsVja2r2aigmjganF7QAwqKxJS8Ls9hwTuKeaIJNQzNItd7vdZ1hBdIhEORAaRJRBUIJSOII7Ro4gAHI9cRBobtFikKwTAtgAAK9NkKxLeA4rCMgk4hXRQpFTPd929kNwXr21gY7HofuEAf5+aKyJDfe95oCPUHDDzZiG-r5eaTKaGRBTydIQwH1msnc1M7DByYLHY4lDYbvcykHAAPgA+M93vbLNYbd8fva3v8-zpIhSGeYDQIAal-QDvRpcCACYYxpItLRQuBpCg60YI-YhFnAmM1jgeBKiIPD6SkaCPx7Si7zQ8VaD3AASNCaL2LsqPY7tOMhL0Zh4yloHQZ5aBWK09jmcUti9OcrDyQoZJsMTvT+eIqSyGAlLDW17UdQpC1NNTMhgQZ3zmYlmwlbovhUT0sL2TxTQbYdCgIVZ0gIGx4gHKxmDgMxNLvJzqDtKxKjcpxFJGXoBjrVoRiwABZQZLMS50umSkZnRkDpUvSsBJEkXs7O9eKkrAd9CvfVBPFgKpxVc9zPO8tlyH86CGzUJswsaxEousjKKxyjoErSgbyyGsrKuKvZ2gAeXGcriqmj8HPiA5+BImBUHFDRrFTaCOiynKRq6HaalTdanU6RKOAAIWS4gtvqtproSjgOgG46OGdCZlr-L7Cl2i6Siu27EA4SsmDgTQiAeognpcl6OnBrp6EEKkOAADQG51wedeHNFoSJ3V+iqio-PaOSgeInPq8KPOsLyHRavyArDIKQrgbqIt6zpooel6ekUbG63aW6EqwABpLB4N+8m-3aIWRbJ99Sg8ipaZc+mmuZ3y2um+tPGCzRQoanmkf52LBeFgbxalmW5egrN5D6N4Pz+sNinZNV6DkjggfEcDxTg+lKjdFkvdVTl6CkTiuxmGZVGofgOA3chGFEa8CtPbV0yjDp0HENBUEYk4hmLxiB3oIc+LASFJiAA" width="150%" height="800px" data-external="1" style="position: relative; z-index:1">
</iframe>
</div>
<div class="section level2">
<h2 id="decorating-datatables">Decorating <code>datatables</code><a class="anchor" aria-label="anchor" href="#decorating-datatables"></a>
</h2>
<p>Here’s an example to showcase how you can edit an output of class
<code>datatables</code>. Please refer the <a href="https://rstudio.github.io/DT/functions.html" class="external-link">helper functions</a>
of the <code>DT</code> package to learn more about extending the
<code>datatables</code> objects.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://insightsengineering.github.io/teal.modules.clinical/">teal.modules.clinical</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/teal_data.html" class="external-link">teal_data</a></span><span class="op">(</span>join_keys <span class="op">=</span> <span class="va">default_cdisc_join_keys</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="st">"ADRS"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span><span class="va">data</span>, <span class="op">{</span></span>
<span>  <span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="va">rADSL</span></span>
<span>  <span class="va">ADLB</span> <span class="op">&lt;-</span> <span class="va">tmc_ex_adlb</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">AVISIT</span> <span class="op">==</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="external-link">fct_reorder</a></span><span class="op">(</span><span class="va">AVISIT</span>, <span class="va">AVISITN</span>, <span class="va">min</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      ONTRTFL <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>        <span class="va">AVISIT</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SCREENING"</span>, <span class="st">"BASELINE"</span><span class="op">)</span> <span class="op">~</span> <span class="st">""</span>,</span>
<span>        <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Y"</span></span>
<span>      <span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/with_label.html" class="external-link">with_label</a></span><span class="op">(</span><span class="st">"On Treatment Record Flag"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://insightsengineering.github.io/teal.data/latest-tag/reference/join_keys.html" class="external-link">join_keys</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">default_cdisc_join_keys</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">dt_table_decorator</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">color1</span> <span class="op">=</span> <span class="st">"pink"</span>, <span class="va">color2</span> <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">teal_transform_module</span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"Table color"</span>,</span>
<span>    ui <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">selectInput</span><span class="op">(</span></span>
<span>        <span class="fu">NS</span><span class="op">(</span><span class="va">id</span>, <span class="st">"color"</span><span class="op">)</span>,</span>
<span>        <span class="st">"Table Color"</span>,</span>
<span>        choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"white"</span>, <span class="va">color1</span>, <span class="va">color2</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"Default"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">moduleServer</span><span class="op">(</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu">reactive</span><span class="op">(</span><span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span></span>
<span>            <span class="op">{</span></span>
<span>              <span class="va">table</span> <span class="op">&lt;-</span> <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/formatCurrency.html" class="external-link">formatStyle</a></span><span class="op">(</span></span>
<span>                <span class="va">table</span>,</span>
<span>                columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">table</span><span class="op">$</span><span class="va">x</span>, <span class="st">"colnames"</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                target <span class="op">=</span> <span class="st">"row"</span>,</span>
<span>                backgroundColor <span class="op">=</span> <span class="va">color</span></span>
<span>              <span class="op">)</span></span>
<span>            <span class="op">}</span>,</span>
<span>            color <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">color</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">init</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  modules <span class="op">=</span> <span class="fu">modules</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/tm_t_pp_laboratory.html">tm_t_pp_laboratory</a></span><span class="op">(</span></span>
<span>      label <span class="op">=</span> <span class="st">"tm_t_pp_laboratory"</span>,</span>
<span>      dataname <span class="op">=</span> <span class="st">"ADLB"</span>,</span>
<span>      patient_col <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>      paramcd <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="st">"PARAMCD"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"PARAMCD"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      param <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="st">"PARAM"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"PARAM"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      timepoints <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="st">"ADY"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"ADY"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      anrind <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="st">"ANRIND"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"ANRIND"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      aval_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="st">"AVAL"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"AVAL"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      avalu_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span>        choices <span class="op">=</span> <span class="fu">variable_choices</span><span class="op">(</span><span class="st">"ADLB"</span>, <span class="st">"AVALU"</span><span class="op">)</span>,</span>
<span>        selected <span class="op">=</span> <span class="st">"AVALU"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      decorators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>table <span class="op">=</span> <span class="fu">dt_table_decorator</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: The `decorators` argument of `tm_t_pp_laboratory()` is deprecated as of</span></span>
<span><span class="co">## teal.modules.clinical 0.11.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Decorators functionality was removed from this module. The `decorators`</span></span>
<span><span class="co">##   argument will be ignored.</span></span>
<span><span class="co">## <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shinyApp</span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<iframe src="https://shinylive.io/r/app/#code=NobwRAdghgtgpmAXGKAHVA6ASmANGAYwHsIAXOMpMASzLgCcoDTqA3OAAgB4BaDgMwCuEZtRIAKAJQcAKlgCqAUQA6EADbUARo3oBPceShqMMIgBNBauAGcMBDRGoEjk1Ru1Q9BuEZPnLNnYOTi6qqmZQpFDcfIZqAPoRUeIAVkS08QDWcLrWHAC8HGZw-FCWpPEEZtTWBPFpGdm5wATiymAAggAiAMoAMu24HO3dWD3tkgC6rhBJ0bwcAO7UpAAWtOJzQyCqHBzd-TEc9AcDEHvdfQBCR6QwdXAAHvFQZmqaHAA+AHy7exwwQRRcjiDoANQAkj0ITICoV+ER6M5SNZEIh+Mx4vQ4IjivRQZDoTIhuCoTCAHJDGC0STSH5-PaA4FwNrnf57ADy5LkMgAYn0ChxnNY4PFFqsKKz2ezSUSOABSWjyoVtMA9ADCWEUinJEPJAHFBsMwFcOj1FH09SowNIAH7GwYM6VyJQce3tACa7Sdezp3yWK1W8TUUE0cDUqo55xk2Mi8DIHCwcGI9DMHF5IYA5hMnTMAL4zBoQLI5aybSJQaQLYqlcqVaq1erpYtNazAaDwMtzKZhWYVKKaKyJZOIyKIo5CEQsCTENSIgCMgvaqFomSNs8RACYl2ANJnVqRB4I4BMODs2XF4qRGBBrAj6DB4qYLFYpf8Q2G1DuZKGrEKiHO9COmyeyCNQgqTqIEjUGY0jntKHAilYzAQhAqBAm+CHkj04gwUM7QbkBNq4D6-ztD+g6cOqAGIsBCF7AQqzpAQNiCq07TiisJ54P+gHzkMhGbpIJEgdKSHJuQaaFO0XQlGUaikN6om+k6eYieyIr0Ow9AQcIUEQLhZhDN2Z6kc+AQ9Aw2mGUMkHTgZtDoaQQxEECTlDCK1jWGIEBwaReyxqI7DiPB9F7HMUhfP6yxrBs-nSqFYXsgOf4LF0MhoveMCRD0pC6K+8VhSlcDqUlCGzoIMC3oKkTXgYv5wAAJI8+GEABHY2BMwA8POkylWVyWeJmcCkDu9BEIsdEDeymhMJkmbjcIZjUYBbE0UBylJTM01qYV-yEYKjlAo1hF7dt9EFqRl2iXmfz5r2aCoEctArG+cyClsfzmVYeSFN9NiYRwdxXvE6DBqGo6kIi+ikR+4Y7sDFRgx+kPQ1N7JzB1O6XFc6P-KgkTUBQFSzju8g9PIVwAFIQl0eN7ATjD3FJQpMU4NjxOJzBwGYgPsoxzGsYUrCeNQDWVGzLFliMXTXEa7QAAodFgHQALLqnTxHxVzkk7krKvq5rpHCaRjOwGxksczrPN8-tlu-RwIv0GLlES4L0udLLuM8YrytqxM-VieGEk83rfuq0pCEm5tLDwKgzYohb7uc8H3O8-FAvsw7Tsu0OmdS6qOPy57Xpa5tezWyzMul8bgd7FAEDO7MSdZynyGSbbDH24KOfi-nAMy3LPudOSWB6pr0dhZX2Oj+PkfSpP0pQCLCROy3UttyH6fl6z7s96Lff24XXvF+CHQDGXU+p7r0mdGC5-z+yi-ssvRiCPEa+FP31ib2nne71nfeztD7u2PkPVqZ8+jyADtra+odb6QOgWAWupFigpjHPQB2GhrCkHqpRD6-ZxZoNRviWkuY7qqBmKoag-AOC4ToIwIKLJaSmTZNYdYEBdAdHQOIR6jUwJDD4ZpbS+YwB5kmEAA" width="150%" height="800px" data-external="1" style="position: relative; z-index:1">
</iframe>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>teal.modules.clinical is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
