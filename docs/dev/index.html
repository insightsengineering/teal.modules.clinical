<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teal Modules for TLG Functions in Tern • teal.tern</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><meta property="og:title" content="Teal Modules for TLG Functions in Tern">
<meta property="og:description" content="Provides teal modules for outputs defined in the tern package.
  The teal modules add an encoding panel to interactively change the encoding within teal.">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">teal.tern</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development package">0.5.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/tm_t_forest_rsp.html">Forest Plot Response Module</a>
    </li>
    <li>
      <a href="articles/tm_t_forest_tte.html">Forest Plot Time To Event Module</a>
    </li>
    <li>
      <a href="articles/tm_t_km.html">Kaplan Meier Plot Module</a>
    </li>
    <li>
      <a href="articles/tm_t_rsp.html">Response Table Module</a>
    </li>
    <li>
      <a href="articles/tm_t_summarize_variables.html">Demographic Table Module</a>
    </li>
    <li>
      <a href="articles/tm_t_tte.html">Time To Event Table Module</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.roche.com/Rpackages/teal.oncology">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    
<div id="teal-tern" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#teal-tern" class="anchor"></a>teal.tern</h1></div>
<p>The <code>teal.tern</code> R package contains interactive <code>teal</code> modules for the outputs (TLGs) in <a href="https://github.roche.com/Rpackages/tern"><code>tern</code></a>.</p>
<p>See a live demo <a href="http://shiny.roche.com/users/waddella/teal_tern/">on the Roche Shiny Server</a>.</p>
<p>To build your own app, see <a href="#getting-started">Getting Started</a> below.</p>
<div id="training" class="section level2">
<h2 class="hasAnchor">
<a href="#training" class="anchor"></a>Training</h2>
<p>We are currently working on trainings. Here is a list of available content:</p>
<ul>
<li><a href="http://go.gene.com/go-teal">go.gene.com/go-teal: a gentle introduction and getting started webpage</a></li>
<li><a href="https://streamingmedia.roche.com/media/AgileR+Leader+Perspectives+March+2018/1_ccr8716n">Agile R Leader Perspectives March 2018</a></li>
<li><a href="http://pdwebdev01.gene.com/groups/devo/multimedia/Gen_Teal/story.html">General Teal and Agile R Framework</a></li>
</ul>
<p>Videos explaining the indiviual teal modules in <code>teal.tern</code> can be found under <a href="https://pages.github.roche.com/Rpackages/teal.tern/articles/">Articles</a> on the web documentation.</p>
</div>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>Please install the package dependencies as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(
  <span class="dt">repo =</span> <span class="st">"Rpackages/random.cdisc.data"</span>,
  <span class="dt">ref =</span> <span class="st">"v0.1.0"</span>, 
  <span class="dt">host =</span> <span class="st">"https://github.roche.com/api/v3"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>
)

devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"Roche/rtables"</span>, <span class="dt">ref =</span> <span class="st">"v0.1.0"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>)

devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(
  <span class="dt">repo =</span> <span class="st">"Rpackages/tern"</span>,
  <span class="dt">ref =</span> <span class="st">"v0.5.0"</span>, 
  <span class="dt">host =</span> <span class="st">"https://github.roche.com/api/v3"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>
)

devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(
  <span class="dt">repo =</span> <span class="st">"Rpackages/teal"</span>,
  <span class="dt">ref =</span> <span class="st">"v0.0.3"</span>, 
  <span class="dt">host =</span> <span class="st">"https://github.roche.com/api/v3"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>
)

devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(
  <span class="dt">repo =</span> <span class="st">"Rpackages/teal.tern"</span>,
  <span class="dt">ref =</span> <span class="st">"v0.5.0"</span>, 
  <span class="dt">host =</span> <span class="st">"https://github.roche.com/api/v3"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>
)</code></pre></div>
</div>
<div id="getting-started" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting Started</h1>
<p>Here is an example app that shows all modules using random data. If you save this code into a file named <code>app.R</code> then it is a valid <a href="https://shiny.rstudio.com/articles/app-formats.html">single-file shiny application</a>.</p>
<div id="simple-app" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-app" class="anchor"></a>Simple app</h2>
<p>Copy the following code into a new R file and execute it line by line:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(teal.tern)
<span class="kw">library</span>(random.cdisc.data)

ASL &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/random.cdisc.data/topics/radam">radam</a></span>(<span class="st">"ASL"</span>, <span class="dt">N =</span> <span class="dv">600</span>)

x &lt;-<span class="st"> </span>teal<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/teal/topics/init">init</a></span>(
  <span class="dt">data =</span> <span class="kw">list</span>(<span class="dt">ASL =</span> ASL),
  <span class="dt">modules =</span> <span class="kw">root_modules</span>(
    <span class="kw">tm_data_table</span>(<span class="st">"Data Table"</span>),
    <span class="kw">tm_variable_browser</span>(<span class="st">"Variable Browser"</span>),
    <span class="kw"><a href="reference/tm_t_summarize_variables.html">tm_t_summarize_variables</a></span>(
      <span class="dt">label =</span> <span class="st">"Demographic Table"</span>,
      <span class="dt">dataname =</span> <span class="st">"ASL"</span>,
      <span class="dt">arm_var =</span> <span class="st">"ARM"</span>,
      <span class="dt">arm_var_choices =</span> <span class="kw">c</span>(<span class="st">"ARM"</span>, <span class="st">"ARMCD"</span>),
      <span class="dt">summarize_vars =</span>  <span class="kw">c</span>(<span class="st">"BAGE"</span>, <span class="st">"SEX"</span>),
      <span class="dt">summarize_vars_choices =</span>  <span class="kw">c</span>(<span class="st">"BAGE"</span>, <span class="st">"SEX"</span>, <span class="st">"RACE"</span>)
    )
  )
)

<span class="kw">shinyApp</span>(x<span class="op">$</span>ui, x<span class="op">$</span>server)</code></pre></div>
<p>This should start the teal web app. Now save the above code into an R file named <code>app.R</code> and replace <code>radam</code> with <code>read_bce</code> and select a dataset from a study of your choice. Start the app again and configure the arguments of <code>tm_t_summarize_variables</code> according to the information you would like to summarize in your <code>ASL</code> dataset.</p>
</div>
<div id="app-setup-with-all-available-modules" class="section level2">
<h2 class="hasAnchor">
<a href="#app-setup-with-all-available-modules" class="anchor"></a>App setup with all available modules</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(teal.tern)
<span class="kw">library</span>(random.cdisc.data)

## Generate Data
ASL &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/random.cdisc.data/topics/radam">radam</a></span>(<span class="st">"ASL"</span>, <span class="dt">N =</span> <span class="dv">600</span>,
             <span class="dt">arm_choices =</span> <span class="kw">c</span>(<span class="st">"Arm A"</span>, <span class="st">"Arm B"</span>, <span class="st">"Arm C"</span>),
             <span class="dt">start_with =</span> <span class="kw">list</span>(
               <span class="dt">ARM1 =</span> <span class="kw">c</span>(<span class="st">"DUMMY A"</span>, <span class="st">"DUMMY B"</span>),
               <span class="dt">STRATM1 =</span> <span class="kw">paste</span>(<span class="st">"STRATM1"</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>),
               <span class="dt">STRATM2 =</span> <span class="kw">paste</span>(<span class="st">"STRATM2"</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>),
               <span class="dt">TCICLVL2 =</span> <span class="kw">paste</span>(<span class="st">"STRATM2"</span>, letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]),
               <span class="dt">T1I1FL =</span> <span class="kw">c</span>(T,F),
               <span class="dt">T0I0FL =</span> <span class="kw">c</span>(T,F),
               <span class="dt">ITTGEFL =</span> <span class="kw">c</span>(T,F),
               <span class="dt">ITTWTFL =</span> <span class="kw">c</span>(T,F),
               <span class="dt">ITTGE2FL =</span> <span class="kw">c</span>(T,F),
               <span class="dt">ITTGE3FL =</span> <span class="kw">c</span>(T,F)
             )) 
ATE &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/random.cdisc.data/topics/radam">radam</a></span>(<span class="st">"ATE"</span>, <span class="dt">ADSL =</span> ASL)
ARS &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/random.cdisc.data/topics/radam">radam</a></span>(<span class="st">"ARS"</span>, <span class="dt">ADSL =</span> ASL)

## Reusable Configuration For Modules
arm_var &lt;-<span class="st"> "ARM"</span>
arm_var_choices &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"ARM"</span>, <span class="st">"ARMCD"</span>, <span class="st">"ARM1"</span>, <span class="st">"STRATM1"</span>, <span class="st">"STRATM2"</span>)

strata_var &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"STRATM1"</span>, <span class="st">"STRATM2"</span>, <span class="st">"TCICLVL2"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">intersect</span>(<span class="kw">names</span>(ASL))
strata_var_choices &lt;-<span class="st">  </span><span class="kw">names</span>(ASL)[(<span class="kw">sapply</span>(ASL, is.character))] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">intersect</span>(<span class="kw">names</span>(ASL))

dm_summarize_vars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"SEX"</span>, <span class="st">"BAGE"</span>, <span class="st">"RACE"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">intersect</span>(<span class="kw">names</span>(ASL))
dm_summarize_vars_choices &lt;-<span class="st"> </span><span class="kw">names</span>(ASL)

facet_var &lt;-<span class="st">  "TCICLVL2"</span>
facet_var_choices &lt;-<span class="st"> </span><span class="kw">names</span>(ASL)[(<span class="kw">sapply</span>(ASL, is.character))] <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">intersect</span>(<span class="kw">names</span>(ASL))

paramcd_tte &lt;-<span class="st"> "OS"</span>
paramcd_choices_tte &lt;-<span class="st"> </span><span class="kw">unique</span>(ATE<span class="op">$</span>PARAMCD)

paramcd_rsp &lt;-<span class="st"> "OVRSPI"</span>
paramcd_choices_rsp &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"BESRSPI"</span>, <span class="st">"OVRINV"</span>, <span class="st">"OVRSPI"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">intersect</span>(ARS<span class="op">$</span>PARAMCD)

x_var_ct &lt;-<span class="st"> "T1I1FL"</span>
y_var_ct &lt;-<span class="st"> "T0I0FL"</span>
ct_var_choices &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"T1I1FL"</span>, <span class="st">"T0I0FL"</span>, <span class="st">"ITTGEFL"</span>, <span class="st">"ITTWTFL"</span>, <span class="st">"ITTGE2FL"</span>, <span class="st">"ITTGE3FL"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">intersect</span>(<span class="kw">names</span>(ASL))

<span class="co"># reference &amp; comparison arm selection when switching the arm variable</span>
arm_ref_comp &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">ARM =</span> <span class="kw">list</span>(<span class="dt">ref =</span> <span class="st">"Arm A"</span>, <span class="dt">comp =</span> <span class="kw">c</span>(<span class="st">"Arm B"</span>, <span class="st">"Arm C"</span>)),
  <span class="dt">ARM1 =</span> <span class="kw">list</span>(<span class="dt">ref =</span> <span class="st">"DUMMY B"</span>, <span class="dt">comp =</span> <span class="st">"DUMMY A"</span>)
)

## Setup App
x &lt;-<span class="st"> </span>teal<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/teal/topics/init">init</a></span>(
  <span class="dt">data =</span> <span class="kw">list</span>(<span class="dt">ASL =</span> ASL, <span class="dt">ARS =</span> ARS, <span class="dt">ATE =</span> ATE),
  <span class="dt">modules =</span> <span class="kw">root_modules</span>(
    <span class="kw">module</span>(
      <span class="dt">label =</span> <span class="st">"Study Information"</span>,
      <span class="dt">server =</span> <span class="cf">function</span>(input, output, session, datasets) {},
      <span class="dt">ui =</span> <span class="cf">function</span>(id) {
        <span class="kw">tagList</span>(
          tags<span class="op">$</span><span class="kw">p</span>(<span class="st">"Info about data source:"</span>),
          tags<span class="op">$</span><span class="kw">p</span>(<span class="st">"Radom data is used that has been created with the "</span>,
                 tags<span class="op">$</span><span class="kw">code</span>(<span class="st">"random.cdisc.data"</span>), <span class="st">"R package."</span>)
        )
      },
      <span class="dt">filters =</span> <span class="ot">NULL</span>
    ),
    <span class="kw">tm_data_table</span>(<span class="st">"Data Table"</span>),
    <span class="kw">tm_variable_browser</span>(<span class="st">"Variable Browser"</span>),
    <span class="kw"><a href="reference/tm_t_summarize_variables.html">tm_t_summarize_variables</a></span>(
      <span class="dt">label =</span> <span class="st">"Demographic Table"</span>,
      <span class="dt">dataname =</span> <span class="st">"ASL"</span>,
      <span class="dt">arm_var =</span> arm_var,
      <span class="dt">arm_var_choices =</span> arm_var_choices,
      <span class="dt">summarize_vars =</span>  dm_summarize_vars,
      <span class="dt">summarize_vars_choices =</span> dm_summarize_vars_choices
    ),
    <span class="kw">modules</span>(
      <span class="st">"Forest Plots"</span>,
      <span class="kw"><a href="reference/tm_g_forest_tte.html">tm_g_forest_tte</a></span>(
        <span class="dt">label =</span> <span class="st">"Survival Forest Plot"</span>,
        <span class="dt">dataname =</span> <span class="st">"ATE"</span>,
        <span class="dt">arm_var =</span> arm_var,
        <span class="dt">arm_var_choices =</span> arm_var_choices,
        <span class="dt">subgroup_var =</span> strata_var,
        <span class="dt">subgroup_var_choices =</span> strata_var_choices,        
        <span class="dt">paramcd =</span> paramcd_tte,
        <span class="dt">paramcd_choices =</span> paramcd_choices_tte,
        <span class="dt">plot_height =</span> <span class="kw">c</span>(<span class="dv">800</span>, <span class="dv">200</span>, <span class="dv">4000</span>)
      ),
      <span class="kw"><a href="reference/tm_g_forest_rsp.html">tm_g_forest_rsp</a></span>(
        <span class="dt">label =</span> <span class="st">"Response Forest Plot"</span>,
        <span class="dt">dataname =</span> <span class="st">"ARS"</span>,
        <span class="dt">arm_var =</span> arm_var,
        <span class="dt">arm_var_choices =</span> arm_var_choices,
        <span class="dt">subgroup_var =</span> strata_var,
        <span class="dt">subgroup_var_choices =</span> strata_var_choices,
        <span class="dt">paramcd =</span> paramcd_rsp,
        <span class="dt">paramcd_choices =</span> paramcd_choices_rsp,
        <span class="dt">plot_height =</span> <span class="kw">c</span>(<span class="dv">800</span>, <span class="dv">200</span>, <span class="dv">4000</span>)
      )
    ),
    <span class="kw"><a href="reference/tm_g_km.html">tm_g_km</a></span>(
      <span class="dt">label =</span> <span class="st">"Kaplan Meier Plot"</span>,
      <span class="dt">dataname =</span> <span class="st">"ATE"</span>,
      <span class="dt">arm_var =</span> arm_var,
      <span class="dt">arm_var_choices =</span> arm_var_choices,
      <span class="dt">arm_ref_comp =</span> arm_ref_comp,
      <span class="dt">paramcd =</span> paramcd_tte,
      <span class="dt">paramcd_choices =</span> paramcd_choices_tte,
      <span class="dt">facet_var =</span> facet_var,
      <span class="dt">facet_var_choices =</span> facet_var_choices,
      <span class="dt">strata_var =</span> strata_var,
      <span class="dt">strata_var_choices =</span> strata_var_choices,
      <span class="dt">plot_height =</span> <span class="kw">c</span>(<span class="dv">1800</span>, <span class="dv">200</span>, <span class="dv">4000</span>)
    ), 
    <span class="kw"><a href="reference/tm_t_rsp.html">tm_t_rsp</a></span>(
      <span class="dt">label =</span> <span class="st">"Response Table"</span>,
      <span class="dt">dataname =</span> <span class="st">"ARS"</span>,
      <span class="dt">arm_var =</span> arm_var,
      <span class="dt">arm_var_choices =</span> arm_var_choices,
      <span class="dt">arm_ref_comp =</span> arm_ref_comp,
      <span class="dt">paramcd =</span> paramcd_rsp,
      <span class="dt">paramcd_choices =</span> paramcd_choices_rsp,
      <span class="dt">strata_var =</span> strata_var,
      <span class="dt">strata_var_choices =</span> strata_var_choices
    ),
    <span class="kw"><a href="reference/tm_t_tte.html">tm_t_tte</a></span>(
      <span class="dt">label =</span> <span class="st">"Time To Event Table"</span>,
      <span class="dt">dataname =</span> <span class="st">"ATE"</span>,
      <span class="dt">arm_var =</span> arm_var,
      <span class="dt">arm_var_choices =</span> arm_var_choices,
      <span class="dt">arm_ref_comp =</span> arm_ref_comp,
      <span class="dt">paramcd =</span> paramcd_tte,
      <span class="dt">paramcd_choices =</span> paramcd_choices_tte,
      <span class="dt">strata_var =</span> strata_var,
      <span class="dt">strata_var_choices =</span> strata_var_choices,
      <span class="dt">time_points =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">18</span>),
      <span class="dt">time_points_choices =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">24</span>, <span class="dv">30</span>, <span class="dv">36</span>, <span class="dv">42</span>),
      <span class="dt">time_unit =</span> <span class="st">"month"</span>,
      <span class="dt">event_desrc_var =</span> <span class="st">"EVNTDESC"</span>
    ),
    <span class="kw"><a href="reference/tm_t_percentage_cross_table.html">tm_t_percentage_cross_table</a></span>(
      <span class="st">"Cross Table"</span>,
      <span class="dt">dataname =</span> <span class="st">"ASL"</span>,
      <span class="dt">x_var =</span> x_var_ct,
      <span class="dt">x_var_choices =</span> ct_var_choices,
      <span class="dt">y_var =</span> y_var_ct,
      <span class="dt">y_var_choices =</span> ct_var_choices
    )
  ),
  <span class="dt">header =</span> <span class="kw">div</span>(
    <span class="dt">class=</span><span class="st">""</span>,
    <span class="dt">style=</span><span class="st">"margin-bottom: 2px;"</span>,
    tags<span class="op">$</span><span class="kw">h1</span>(<span class="st">"Example App With teal.tern Teal Modules"</span>, tags<span class="op">$</span><span class="kw">span</span>(<span class="st">"SPA"</span>, <span class="dt">class=</span><span class="st">"pull-right"</span>))
  ),
  <span class="dt">footer =</span> tags<span class="op">$</span><span class="kw">p</span>(<span class="dt">class=</span><span class="st">"text-muted"</span>, <span class="st">"Info About Authors"</span>)
)  

<span class="kw">shinyApp</span>(x<span class="op">$</span>ui, x<span class="op">$</span>server)</code></pre></div>
<p>Each teal module in <code>teal.tern</code> will be explained in a separate vignette and is accessile via the articles tab on the <a href="http://pages.github.roche.com/Rpackages/teal.tern">project site</a>.</p>
</div>
<div id="deployment" class="section level2">
<h2 class="hasAnchor">
<a href="#deployment" class="anchor"></a>Deployment</h2>
<div id="introduction" class="section level3">
<h3 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h3>
<p>We currently recommend to deploy your teal apps to the shiny server at <a href="http://shiny.roche.com">shiny.roche.com</a>. We will look into the deployment mechanism with <a href="https://rsconnect.roche.com/">rstudio connect</a> soon.</p>
<p>Please also have a look at the <a href="https://streamingmedia.roche.com/media/Deploy+a+Teal+App+to+the+Shiny+server/1_t59abpdw">following video</a> that shows the deployment step by step.</p>
</div>
<div id="deployment-setup" class="section level3">
<h3 class="hasAnchor">
<a href="#deployment-setup" class="anchor"></a>Deployment Setup</h3>
<p>Teal apps should be setup such that the R packages <code>teal</code>, <code>tea.tern</code>, <code>tern</code>, and <code>rtables</code> are installed locally for every app. This way you can use different versions of those libraries for your different projects.</p>
<ol>
<li><p>Create a <a href="http://github.roche.com">GitHub</a> repository with your <code>app.R</code> file. Add <code>libs/*</code> to the <code>.gitignore</code> file.</p></li>
<li><p>Save the following code in a file <code>install.R</code></p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">project.path &lt;-<span class="st"> </span><span class="kw">getwd</span>() <span class="co">#"/srv/shiny-server/users/..."</span>

path.teal.libs &lt;-<span class="st">  </span><span class="kw">file.path</span>(project.path, <span class="st">"libs"</span>)

<span class="cf">if</span> (<span class="op">!</span><span class="kw">dir.exists</span>(path.teal.libs)) <span class="kw">dir.create</span>(path.teal.libs)

<span class="co"># delete all current versions of teal and teal.oncology in path.teal.libs</span>
<span class="kw">lapply</span>(<span class="kw">list.dirs</span>(path.teal.libs, <span class="dt">recursive =</span> <span class="ot">FALSE</span>), unlink, <span class="dt">recursive =</span> <span class="ot">TRUE</span>, <span class="dt">force =</span> <span class="ot">TRUE</span>)

orig_libpaths &lt;-<span class="st"> </span><span class="kw">.libPaths</span>()

<span class="kw">.libPaths</span>(<span class="kw">c</span>(
    path.teal.libs,
    <span class="kw">as.vector</span>(<span class="kw">Filter</span>(<span class="cf">function</span>(x) <span class="op">!</span><span class="kw">grepl</span>(<span class="st">"^/opt/bee/home"</span>, x), orig_libpaths))
))

devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(
  <span class="dt">repo =</span> <span class="st">"Rpackages/random.cdisc.data"</span>,
  <span class="dt">ref =</span> <span class="st">"v0.1.0"</span>, 
  <span class="dt">host =</span> <span class="st">"https://github.roche.com/api/v3"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>
)

devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"Roche/rtables"</span>, <span class="dt">ref =</span> <span class="st">"v0.1.0"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>)

devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(
  <span class="dt">repo =</span> <span class="st">"Rpackages/tern"</span>,
  <span class="dt">ref =</span> <span class="st">"v0.5.0"</span>, 
  <span class="dt">host =</span> <span class="st">"https://github.roche.com/api/v3"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>
)

devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(
  <span class="dt">repo =</span> <span class="st">"Rpackages/teal"</span>,
  <span class="dt">ref =</span> <span class="st">"v0.0.3"</span>, 
  <span class="dt">host =</span> <span class="st">"https://github.roche.com/api/v3"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>
)

devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(
  <span class="dt">repo =</span> <span class="st">"Rpackages/teal.tern"</span>,
  <span class="dt">ref =</span> <span class="st">"v0.5.0"</span>, 
  <span class="dt">host =</span> <span class="st">"https://github.roche.com/api/v3"</span>,
  <span class="dt">upgrade_dependencies =</span> <span class="ot">FALSE</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>
)

<span class="kw">.libPaths</span>(orig_libpaths)</code></pre></div>
<ol>
<li>Add the following line as the first in <code>app.R</code> line</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">.libPaths</span>(<span class="kw">c</span>(<span class="kw">normalizePath</span>(<span class="st">"./libs"</span>), <span class="kw">.libPaths</span>()))</code></pre></div>
<ol>
<li>Commit and push you changes to the GitHub repository.</li>
</ol>
</div>
<div id="run-locally-laptop-and-r-roche-com" class="section level3">
<h3 class="hasAnchor">
<a href="#run-locally-laptop-and-r-roche-com" class="anchor"></a>Run Locally (Laptop and r.roche.com)</h3>
<ol>
<li>
<p>Install the libraries specified in <code>install.R</code> in your Terminal (shell)</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">Rscript</span> install.R</code></pre></div>
</li>
<li><p>Restart R in RStudio with the menu item <code>Session</code> &gt; <code>Restart R</code>.</p></li>
<li><p>Execute the code in <code>app.R</code> either line by line or all at once.</p></li>
</ol>
</div>
<div id="run-on-the-shiny-server" class="section level3">
<h3 class="hasAnchor">
<a href="#run-on-the-shiny-server" class="anchor"></a>Run on the Shiny server</h3>
<ol>
<li><p>Choose a location on the shiny server. If you want your app to be accessible under <code>http://shiny.roche.com/user/waddella/my-app/</code> then you need to put the <code>app.R</code> file to <code>/srv/shiny-server/user/waddella/my-app/</code>.</p></li>
<li>
<p>Clone your repository to the chosen location in your Terminal:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> /srv/shiny-server/user/waddella/
<span class="fu">git</span> clone <span class="op">&lt;</span>repository-url<span class="op">&gt;</span> my-app</code></pre></div>
</li>
<li>
<p>Install the dependencies defined in <code>install.R</code>. If your shiny app is installed under <code>/srv/shiny-server/3.*</code> you know the R version that shiny uses from the path. For all other paths shiny uses R version <code>3.3.1</code>. Use the correct R version to install the packages, e.g. to install the packages with R version <code>3.3.1</code> run in your terminal:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> my-app
<span class="ex">Rscript-3.3.1</span> install.R</code></pre></div>
<p>This will install the dependent R packages under <code>./libs</code></p>
</li>
<li><p>Run your shiny app in your web browser</p></li>
<li><p>If you run into errors inspect the logs under: <code>/var/log/shiny-server</code></p></li>
<li><p>Modify your <code>app.R</code> push the changes to github and pull the in your deployed shiny app with <code>git pull</code>. If you do not see the changes in your app then the shiny server has likely cashed your current session in which case the app is not restarted. The easiest way to deal with that is to rename the folder with your app (e.g. <code>mv my-app my-app-2</code>) and open the app the new web address.</p></li>
</ol>
</div>
</div>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="https://github.roche.com/Rpackages/teal.tern/issues">https://​github.roche.com/​Rpackages/​teal.tern/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>Copyright Roche</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Adrian Waddell <br><small class="roles"> Author, maintainer </small>  </li>
<li>Heng Wang <br><small class="roles"> Author </small>  </li>
<li>Yuyao Song <br><small class="roles"> Author </small>  </li>
<li>Chendi Liao <br><small class="roles"> Author </small>  </li>
<li>Mark Rothe <br><small class="roles"> Author </small>  </li>
<li>Xiao Mu Yo <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Adrian Waddell, Heng Wang, Yuyao Song, Chendi Liao, Mark Rothe, Xiao Mu Yo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
