name: Check ðŸ› 

on:
  pull_request:
    types:
      - opened
      - synchronize
      - reopened
      - ready_for_review
    branches:
      - main
      - shinytest2@main
  push:
    branches:
      - main
      - shinytest2@main
      - test-ci-error-not-going-to-merge
  workflow_dispatch:

jobs:
  check:
    name: Check PR ðŸ› 
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/insightsengineering/rstudio:2024.05.05
    steps:
      - name: Determine modified files ðŸ“‹
        run: |
          MODIFIED_FILES=$(git diff --name-only ${{ github.event.pull_request.base.ref }} ${{ github.event.pull_request.head.sha }} | grep '^R/')
          if [ -z "$MODIFIED_FILES" ]; then
            echo "No R files changed"
          else
            echo "Modified R files:"
            echo "$MODIFIED_FILES"
          fi
      - name: Echo the modified files in R ðŸ“¢
        run: |
          echo "Echoing modified files in R..."
          Rscript -e 'print(Sys.getenv("MODIFIED_FILES"))'
