<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Teal Module: Cox Regression Model — tm_t_coxreg • teal.modules.clinical</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Teal Module: Cox Regression Model — tm_t_coxreg"><meta property="og:description" content="Teal module to fit Cox univariate or multivariate models consistent with
COXT01 and COXT02 standard outputs, respectively."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125641273-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125641273-1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">teal.modules.clinical</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.10.9038</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/quickstart_substitute.html">Quick start: `substitute` for NSE</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../index.html">latest</a></li>
   <li><a href="..//index.html"></a></li>
</ul></li>
<!-- end_releases -->
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/insightsengineering/teal.modules.clinical" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Teal Module: Cox Regression Model</h1>
    <small class="dont-index">Source: <a href="https://github.com/insightsengineering/teal.modules.clinical/blob/HEAD/R/tm_t_coxreg.R" class="external-link"><code>R/tm_t_coxreg.R</code></a></small>
    <div class="hidden name"><code>tm_t_coxreg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Teal module to fit Cox univariate or multivariate models consistent with
<code>COXT01</code> and <code>COXT02</code> standard outputs, respectively.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">tm_t_coxreg</span><span class="op">(</span>
  <span class="va">label</span>,
  <span class="va">dataname</span>,
  parentname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu">is</span><span class="op">(</span><span class="va">arm_var</span>, <span class="st">"data_extract_spec"</span><span class="op">)</span>, <span class="fu">datanames_input</span><span class="op">(</span><span class="va">arm_var</span><span class="op">)</span>,
    <span class="st">"ADSL"</span><span class="op">)</span>,
  <span class="va">arm_var</span>,
  arm_ref_comp <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">paramcd</span>,
  <span class="va">cov_var</span>,
  <span class="va">strata_var</span>,
  aval_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span><span class="fu">variable_choices</span><span class="op">(</span><span class="va">dataname</span>, <span class="st">"AVAL"</span><span class="op">)</span>, <span class="st">"AVAL"</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  cnsr_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span><span class="fu">variable_choices</span><span class="op">(</span><span class="va">dataname</span>, <span class="st">"CNSR"</span><span class="op">)</span>, <span class="st">"CNSR"</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  multivariate <span class="op">=</span> <span class="cn">TRUE</span>,
  conf_level <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="fl">0.9</span>, <span class="fl">0.8</span><span class="op">)</span>, <span class="fl">0.95</span>, keep_order <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  pre_output <span class="op">=</span> <span class="cn">NULL</span>,
  post_output <span class="op">=</span> <span class="cn">NULL</span>,
  basic_table_args <span class="op">=</span> <span class="fu">teal.devel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/teal.devel/man/basic_table_args.html" class="external-link">basic_table_args</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>label</dt>
<dd><p>(<code>character</code>)<br>
menu item label of the module in the teal app.</p></dd>
<dt>dataname</dt>
<dd><p>(<code>character</code>)<br>
analysis data used in teal module.</p></dd>
<dt>parentname</dt>
<dd><p>(<code>character</code>)<br>
parent analysis data used in teal module, usually this refers to <code>ADSL</code>.</p></dd>
<dt>arm_var</dt>
<dd><p>(<code><a href="https://rdrr.io/pkg/teal/man/choices_selected.html" class="external-link">teal::choices_selected()</a></code> or <code><a href="https://rdrr.io/pkg/teal/man/data_extract_spec.html" class="external-link">teal::data_extract_spec()</a></code>)<br>
object with all available choices
and preselected option for variable names that can be used as <code>arm_var</code>.
It defines the grouping variable(s) in the results table. If there are two elements selected for <code>arm_var</code>,
second variable will be nested under the first variable.</p></dd>
<dt>arm_ref_comp</dt>
<dd><p>optional, (<code>list</code>)<br>
If specified it must be a named list with each element corresponding to
an arm variable in <code>ADSL</code> and the element must be another list (possibly
with delayed <code><a href="https://rdrr.io/pkg/teal/man/variable_choices.html" class="external-link">teal::variable_choices()</a></code> or delayed <code><a href="https://rdrr.io/pkg/teal/man/value_choices.html" class="external-link">teal::value_choices()</a></code>
with the elements named <code>ref</code> and <code>comp</code> that the defined the default
reference and comparison arms when the arm variable is changed.</p></dd>
<dt>paramcd</dt>
<dd><p>(<code><a href="https://rdrr.io/pkg/teal/man/choices_selected.html" class="external-link">teal::choices_selected()</a></code> or <code><a href="https://rdrr.io/pkg/teal/man/data_extract_spec.html" class="external-link">teal::data_extract_spec()</a></code>)<br>
variable value designating the studied parameter.</p></dd>
<dt>cov_var</dt>
<dd><p>(<code><a href="https://rdrr.io/pkg/teal/man/choices_selected.html" class="external-link">teal::choices_selected()</a></code> or <code><a href="https://rdrr.io/pkg/teal/man/data_extract_spec.html" class="external-link">teal::data_extract_spec()</a></code>)<br>
object with all available choices and preselected option for the covariates
variables.</p></dd>
<dt>strata_var</dt>
<dd><p>(<code><a href="https://rdrr.io/pkg/teal/man/choices_selected.html" class="external-link">teal::choices_selected()</a></code> or <code><a href="https://rdrr.io/pkg/teal/man/data_extract_spec.html" class="external-link">teal::data_extract_spec()</a></code>)<br>
names of the variables for stratified analysis.</p></dd>
<dt>aval_var</dt>
<dd><p>(<code><a href="https://rdrr.io/pkg/teal/man/choices_selected.html" class="external-link">teal::choices_selected()</a></code> or <code><a href="https://rdrr.io/pkg/teal/man/data_extract_spec.html" class="external-link">teal::data_extract_spec()</a></code>)<br>
object with all available choices and preselected option for the analysis
variable.</p></dd>
<dt>cnsr_var</dt>
<dd><p>(<code><a href="https://rdrr.io/pkg/teal/man/choices_selected.html" class="external-link">teal::choices_selected()</a></code> or <code><a href="https://rdrr.io/pkg/teal/man/data_extract_spec.html" class="external-link">teal::data_extract_spec()</a></code>)<br>
object with all available choices and preselected option for the censoring
variable.</p></dd>
<dt>multivariate</dt>
<dd><p>(<code>logical</code>)<br>
If <code>FALSE</code>, the univariate approach is used
(equivalent to <code>COXT01</code> standard) instead of the multivariate model
(equivalent to <code>COXT02</code> standard).</p></dd>
<dt>conf_level</dt>
<dd><p>(<code><a href="https://rdrr.io/pkg/teal/man/choices_selected.html" class="external-link">teal::choices_selected()</a></code>)<br>
object with all available choices and preselected option for the confidence
level, each within range of (0, 1).</p></dd>
<dt>pre_output</dt>
<dd><p>optional, (<code>shiny.tag</code>)<br>
with text placed before the output to put the output into context.
For example a title.</p></dd>
<dt>post_output</dt>
<dd><p>optional, (<code>shiny.tag</code>)<br>
with text placed after the output to put the output into context. For example
the <code><a href="https://rdrr.io/pkg/shiny/man/helpText.html" class="external-link">shiny::helpText()</a></code> elements are useful.</p></dd>
<dt>basic_table_args</dt>
<dd><p>optional, (<code>basic_table_args</code>)<br>
object created by <code><a href="https://rdrr.io/pkg/teal.devel/man/basic_table_args.html" class="external-link">teal.devel::basic_table_args()</a></code> with settings for the module table.
The argument is merged with option <code>teal.basic_table_args</code> and with default module arguments
(hard coded in the module body).<br> For more details, see the help vignette:<br><code>vignette("Custom basic_table arguments module", package = "teal.devel")</code>.</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The Cox Proportional Hazards (PH) model is the most commonly used method to
estimate the magnitude of
the effect in survival analysis. It assumes proportional hazards: the ratio
of the hazards between groups (e.g., two arms) is constant over time.
This ratio is referred to as the "hazard ratio" (HR) and is one of the most
commonly reported metrics to describe the effect size in survival analysis.
For further information about the Cox Proportional Hazards Model, check
"Statistical Analysis of Clinical Trials Data with R", NEST team.</p>
<p>This modules expects that the analysis data has the following variables:</p>
<table class="table table"><tr><td><code>AVAL</code></td><td>time to event</td></tr><tr><td><code>CNSR</code></td><td>boolean or 0,1 is element in <code>AVAL</code> censored</td></tr><tr><td><code>PARAMCD</code></td><td>variable used to filter for endpoint (e.g. OS), after
filtering for <code>paramcd</code> one observation per patient is expected</td></tr></table><p>The arm variables, stratification and covariate variables are taken from the
<code>ADSL</code> data.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    

<ul><li><p>The likelihood ratio test is not supported for model including strata,
Wald test will be substituted.</p></li>
<li><p>Multivariate is the default choice for backward compatibility.</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co">## First example</span></span>
<span class="r-in"><span class="co">## =============</span></span>
<span class="r-in"><span class="co">## The example below is based on the usual approach involving creation of</span></span>
<span class="r-in"><span class="co">## a random CDISC dataset and then running the application.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">scda</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ADSL</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adsl</span></span>
<span class="r-in"><span class="va">ADTTE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/scda/man/synthetic_cdisc_data.html" class="external-link">synthetic_cdisc_data</a></span><span class="op">(</span><span class="st">"latest"</span><span class="op">)</span><span class="op">$</span><span class="va">adtte</span></span>
<span class="r-in"><span class="va">arm_ref_comp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">  ACTARMCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">    ref <span class="op">=</span> <span class="st">"ARM B"</span>,</span>
<span class="r-in">    comp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM A"</span>, <span class="st">"ARM C"</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  ARM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">    ref <span class="op">=</span> <span class="st">"B: Placebo"</span>,</span>
<span class="r-in">    comp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A: Drug X"</span>, <span class="st">"C: Combination"</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">init</span><span class="op">(</span></span>
<span class="r-in">  data <span class="op">=</span> <span class="fu">cdisc_data</span><span class="op">(</span></span>
<span class="r-in">    <span class="fu">cdisc_dataset</span><span class="op">(</span><span class="st">"ADSL"</span>, <span class="va">ADSL</span>, code <span class="op">=</span> <span class="st">'ADSL  &lt;- synthetic_cdisc_data("latest")$adsl'</span><span class="op">)</span>,</span>
<span class="r-in">    <span class="fu">cdisc_dataset</span><span class="op">(</span><span class="st">"ADTTE"</span>, <span class="va">ADTTE</span>, code <span class="op">=</span> <span class="st">'ADTTE &lt;- synthetic_cdisc_data("latest")$adtte'</span><span class="op">)</span>,</span>
<span class="r-in">    check <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  modules <span class="op">=</span> <span class="fu">root_modules</span><span class="op">(</span></span>
<span class="r-in">    <span class="fu">tm_t_coxreg</span><span class="op">(</span></span>
<span class="r-in">      label <span class="op">=</span> <span class="st">"Cox Reg."</span>,</span>
<span class="r-in">      dataname <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span class="r-in">      arm_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM"</span>, <span class="st">"ARMCD"</span>, <span class="st">"ACTARMCD"</span><span class="op">)</span>, <span class="st">"ARM"</span><span class="op">)</span>,</span>
<span class="r-in">      arm_ref_comp <span class="op">=</span> <span class="va">arm_ref_comp</span>,</span>
<span class="r-in">      paramcd <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span class="r-in">        <span class="fu">value_choices</span><span class="op">(</span><span class="va">ADTTE</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>, <span class="st">"OS"</span></span>
<span class="r-in">      <span class="op">)</span>,</span>
<span class="r-in">      strata_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span class="r-in">        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"COUNTRY"</span>, <span class="st">"STRATA1"</span>, <span class="st">"STRATA2"</span><span class="op">)</span>, <span class="st">"STRATA1"</span></span>
<span class="r-in">      <span class="op">)</span>,</span>
<span class="r-in">      cov_var    <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span class="r-in">        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGE"</span>, <span class="st">"BMRKR1"</span>, <span class="st">"BMRKR2"</span>, <span class="st">"REGION1"</span><span class="op">)</span>, <span class="st">"AGE"</span></span>
<span class="r-in">      <span class="op">)</span>,</span>
<span class="r-in">      multivariate <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in">    <span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2021-12-29 13:33:33.9289 pid:2122 token: teal.modules.clinical fun:tm_t_coxreg [INFO] Initializing tm_t_coxreg</span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">shinyApp</span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Second example</span></span>
<span class="r-in"><span class="co">## ==============</span></span>
<span class="r-in"><span class="co">## This time, a synthetic pair of ADTTE/ADSL is fabricated for a Cox regression</span></span>
<span class="r-in"><span class="co">## where ties and pval_method matter.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Dataset fabrication</span></span>
<span class="r-in"><span class="co">## -------------------</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ADTTE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">  STUDYID <span class="op">=</span> <span class="st">"LUNG"</span>,</span>
<span class="r-in">  AVAL    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>        <span class="fl">4</span>,   <span class="fl">3</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">2</span>,   <span class="fl">2</span>,   <span class="fl">3</span>,   <span class="fl">1</span>,   <span class="fl">2</span><span class="op">)</span>,</span>
<span class="r-in">  CNSR    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>        <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">0</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">0</span>,   <span class="fl">0</span>,   <span class="fl">0</span><span class="op">)</span>,</span>
<span class="r-in">  ARMCD   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>                <span class="fl">0</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">0</span>,   <span class="fl">0</span>,   <span class="fl">0</span>,   <span class="fl">0</span><span class="op">)</span>,</span>
<span class="r-in">    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM A"</span>, <span class="st">"ARM B"</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  SEX     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>                <span class="fl">0</span>,   <span class="fl">0</span>,   <span class="fl">0</span>,   <span class="fl">0</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">1</span>,   <span class="fl">1</span><span class="op">)</span>,</span>
<span class="r-in">    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  INST    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ADTTE</span> <span class="op">&lt;-</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">ADTTE</span>, <span class="va">ADTTE</span>, <span class="va">ADTTE</span>, <span class="va">ADTTE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ADTTE</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">ADTTE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ADTTE</span><span class="op">$</span><span class="va">INST</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">ADTTE</span><span class="op">$</span><span class="va">INST</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ADTTE</span><span class="op">$</span><span class="va">AGE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">75</span>, <span class="fl">5</span><span class="op">)</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ADTTE</span><span class="op">)</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ADTTE</span><span class="op">$</span><span class="va">USUBJID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"sub"</span>, <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ADTTE</span><span class="op">)</span>, <span class="va">ADTTE</span><span class="op">$</span><span class="va">INST</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ADTTE</span><span class="op">$</span><span class="va">PARAM</span> <span class="op">&lt;-</span> <span class="va">ADTTE</span><span class="op">$</span><span class="va">PARAMCD</span> <span class="op">&lt;-</span> <span class="st">"OS"</span></span>
<span class="r-in"><span class="va">ADSL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="va">ADTTE</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>, <span class="st">"ARMCD"</span>, <span class="st">"SEX"</span>, <span class="st">"INST"</span>, <span class="st">"AGE"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Teal application</span></span>
<span class="r-in"><span class="co">## ================</span></span>
<span class="r-in"><span class="co">## Note that the R code exported by `Show R Code` does not include the data</span></span>
<span class="r-in"><span class="co">## preprocessing. You will need to create the dataset as above before</span></span>
<span class="r-in"><span class="co">## running the exported R code.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">arm_ref_comp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ARMCD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ref <span class="op">=</span> <span class="st">"ARM A"</span>, comp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM B"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">init</span><span class="op">(</span></span>
<span class="r-in">  data <span class="op">=</span> <span class="fu">cdisc_data</span><span class="op">(</span></span>
<span class="r-in">    <span class="fu">cdisc_dataset</span><span class="op">(</span></span>
<span class="r-in">      dataname <span class="op">=</span> <span class="st">"ADSL"</span>,</span>
<span class="r-in">      x <span class="op">=</span> <span class="va">ADSL</span></span>
<span class="r-in">    <span class="op">)</span>,</span>
<span class="r-in">    <span class="fu">cdisc_dataset</span><span class="op">(</span></span>
<span class="r-in">      dataname <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span class="r-in">      x <span class="op">=</span> <span class="va">ADTTE</span></span>
<span class="r-in">    <span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  modules <span class="op">=</span> <span class="fu">root_modules</span><span class="op">(</span></span>
<span class="r-in">    <span class="fu">tm_t_coxreg</span><span class="op">(</span></span>
<span class="r-in">      label <span class="op">=</span> <span class="st">"Cox Reg."</span>,</span>
<span class="r-in">      dataname <span class="op">=</span> <span class="st">"ADTTE"</span>,</span>
<span class="r-in">      arm_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARMCD"</span><span class="op">)</span>, <span class="st">"ARMCD"</span><span class="op">)</span>,</span>
<span class="r-in">      arm_ref_comp <span class="op">=</span> <span class="va">arm_ref_comp</span>,</span>
<span class="r-in">      paramcd <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span></span>
<span class="r-in">        <span class="fu">value_choices</span><span class="op">(</span><span class="va">ADTTE</span>, <span class="st">"PARAMCD"</span>, <span class="st">"PARAM"</span><span class="op">)</span>, <span class="st">"OS"</span></span>
<span class="r-in">      <span class="op">)</span>,</span>
<span class="r-in">      strata_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"INST"</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span class="r-in">      cov_var <span class="op">=</span> <span class="fu">choices_selected</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SEX"</span>, <span class="st">"AGE"</span><span class="op">)</span>, <span class="st">"SEX"</span><span class="op">)</span>,</span>
<span class="r-in">      multivariate <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in">    <span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2021-12-29 13:33:34.1194 pid:2122 token: teal.modules.clinical fun:tm_t_coxreg [INFO] Initializing tm_t_coxreg</span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">shinyApp</span><span class="op">(</span><span class="va">app</span><span class="op">$</span><span class="va">ui</span>, <span class="va">app</span><span class="op">$</span><span class="va">server</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by NEST, Adrian Waddell, Heng Wang, Yuyao Song, Chendi Liao, Mark Rothe, Xiao Yu Mo, Roche.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

